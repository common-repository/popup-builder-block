(()=>{"use strict";const e=(e,t)=>{const{entrAnimation:o,exitAnimation:s,openTrigger:n,pageLoadDelay:a,scrolledToValue:i,userInactivityTime:c,scheduleDateTime:r,animationDuration:l,outsideClose:d,customSelector:u}=t||{},m=e.querySelector(".gutenkit-popup-container"),p=e.querySelector(".gutenkit-popup-close"),v=()=>{e.classList.add("gutenkit-popup-modal--open"),"page-scroll"===n&&window.removeEventListener("scroll",L),"inactivity"===n&&document.removeEventListener("mousemove",w),"page-exit"===n&&document.removeEventListener("mouseout",y),o&&(m.classList.add(`${o}`),m.style.setProperty("--gkit-popup-animate-duration",`${l}s`),setTimeout((()=>{m.classList.remove(`${o}`)}),1e3*l)),p&&p.addEventListener("click",(()=>g())),d&&(e.addEventListener("click",(()=>g())),document.addEventListener("keydown",(function(e){"Escape"===e.key&&g()})))},g=()=>{m.classList.remove(`${o}`),m.classList.add(`${s}`),m.classList.add("reverse"),setTimeout((()=>{e.classList.remove("gutenkit-popup-modal--open"),m.classList.remove(`${s}`),m.classList.remove("reverse")}),1e3*l)};(()=>{const t=document.querySelector(`a[href="#${e.getAttribute("id")}"]`);if(t){const o=JSON.parse(t.getAttribute("data-dynamic-content-url"));t.addEventListener("click",(t=>{switch(t.preventDefault(),o.popupAction){case"open":v();break;case"close":g();break;case"toggle":e.classList.contains("gutenkit-popup-modal--open")?g():v()}})),p&&p.addEventListener("click",(()=>g()))}})();const L=()=>{const e=document.documentElement.scrollHeight-window.innerHeight;window.scrollY/e*100>=i&&v()};let k;const w=()=>{clearTimeout(k),k=setTimeout((()=>{v()}),1e3*c)};let E=!0;const y=e=>{e.clientY<=0&&E&&(v(),E=!1)},D=()=>{switch(n){case"page-load":setTimeout((()=>{v()}),1e3*a);break;case"page-exit":document.addEventListener("mouseout",y);break;case"page-scroll":window.addEventListener("scroll",L);break;case"inactivity":document.addEventListener("mousemove",w);break;case"on-date":new Date>=new Date(onDateValue)&&v();break;case"custom-selector":let e=u.startsWith(".")?u:`.${u}`;e=document.querySelector(e),e&&e.addEventListener("click",(()=>{v()}))}};r?(()=>{const e=new Date(r?.onDateValue),t=new Date(r?.offDateValue),o=new Date,s=e-o,n=t-o;s>0?setTimeout((()=>{D()}),s):s<=0&&n>0&&D(),n>0?setTimeout((()=>{g()}),n):n<=0&&s>0&&g()})():D()};window.addEventListener("load",(()=>{const t=document.querySelectorAll(".gutenkit-popup-modal");if(t.length>0)for(let o=0;o<t.length;o++){const s=t[o],n=JSON.parse(s.getAttribute("data-settings"));e(s,n)}}))})();